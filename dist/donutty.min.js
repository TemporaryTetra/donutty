/**
 * donutty // Create SVG donut charts with Javascript
 * @author simeydotme <simey.me@gmail.com>
 * @version 1.2.0
 * @license ISC
 * @link http://simey.me
 * @preserve
 */
!function(e,t){var s,o="http://www.w3.org/2000/svg";function n(t){return void 0!==t}function i(t){return parseFloat(t,10)}function r(t){return n(t)&&(!0===t||"true"===t)}(s=t.Donutty=function(t,s){return t&&"string"==typeof t?this.$wrapper=e.querySelectorAll(t)[0]:t instanceof window.HTMLElement?this.$wrapper=t:(this.$wrapper=e.body,s=t),this.state={},this.options=s||{},this.options.min=n(this.options.min)?i(this.options.min):0,this.options.max=n(this.options.max)?i(this.options.max):100,this.options.value=n(this.options.value)?i(this.options.value):50,this.options.round=!n(this.options.round)||r(this.options.round),this.options.circle=!n(this.options.circle)||r(this.options.circle),this.options.padding=n(this.options.padding)?i(this.options.padding):4,this.options.radius=i(this.options.radius)||50,this.options.thickness=i(this.options.thickness)||10,this.options.bg=this.options.bg||"rgba(70, 130, 180, 0.15)",this.options.color=this.options.color||"mediumslateblue",this.options.transition=this.options.transition||"all 1.2s cubic-bezier(0.57, 0.13, 0.18, 0.98)",this.options.text=!1,this.init(),this}).prototype.init=function(){var t;return this.createState(),t=this.getDashValues(),this.createSvg(),this.createBg(t),this.createDonut(t),this.createText(),this.insertFragments(t),this},s.prototype.createState=function(){return this.state.min=this.options.min,this.state.max=this.options.max,this.state.value=this.options.value,this.state.bg=this.options.bg,this.state.color=this.options.color,this},s.prototype.createText=function(){return"function"==typeof this.options.text&&(this.$text=e.createElement("span"),this.$text.classList.add("donut-text"),this.$text.style.opacity=0,this.updateText()),this},s.prototype.createBg=function(t){return this.$bg=e.createElementNS(o,"circle"),this.$bg.setAttribute("cx","50%"),this.$bg.setAttribute("cy","50%"),this.$bg.setAttribute("r",this.options.radius),this.$bg.setAttribute("fill","transparent"),this.$bg.setAttribute("stroke",this.state.bg),this.$bg.setAttribute("stroke-width",this.options.thickness+this.options.padding),this.$bg.setAttribute("stroke-dasharray",t.full*t.multiplier),this.$bg.classList.add("donut-bg"),this.options.round&&this.$bg.setAttribute("stroke-linecap","round"),this},s.prototype.createDonut=function(t){return this.$donut=e.createElementNS(o,"circle"),this.$donut.setAttribute("fill","transparent"),this.$donut.setAttribute("cx","50%"),this.$donut.setAttribute("cy","50%"),this.$donut.setAttribute("r",this.options.radius),this.$donut.setAttribute("stroke",this.state.color),this.$donut.setAttribute("stroke-width",this.options.thickness),this.$donut.setAttribute("stroke-dashoffset",t.full),this.$donut.setAttribute("stroke-dasharray",t.full),this.$donut.classList.add("donut-fill"),this.$donut.style.opacity=0,this.options.round&&this.$donut.setAttribute("stroke-linecap","round"),this},s.prototype.createSvg=function(){var t=2*this.options.radius+this.options.thickness+2*this.options.padding,s=this.options.round?this.options.thickness/3:0,i=this.options.circle?90+s:-225;return this.$html=e.createDocumentFragment(),this.$svg=e.createElementNS(o,"svg"),this.$svg.setAttribute("xmlns",o),this.$svg.setAttribute("viewbox","0 0 "+t+" "+t),this.$svg.setAttribute("transform","rotate( "+i+" )"),this.$svg.classList.add("donut"),this.$svg.style.width=t,this.$svg.style.height=t,this},s.prototype.insertFragments=function(t){this.$svg.appendChild(this.$donut),this.$svg.appendChild(this.$bg),this.$html.appendChild(this.$svg),this.$text&&this.$html.appendChild(this.$text),this.$wrapper.appendChild(this.$html),this.animate(t.fill,t.full)},s.prototype.getDashValues=function(){var t,s,i,e;return e=this.options.circle?1:.75,i=(t=2*Math.PI*this.options.radius)-t*e/100*(s=(this.state.value-this.state.min)/(this.state.max-this.state.min)*100),this.options.round&&this.options.circle&&s<100&&i<this.options.thickness&&(i=this.options.thickness),{fill:i,full:t,multiplier:e}},s.prototype.animate=function(t,s){var i=this;i.$bg.style.transition=this.options.transition,i.$donut.style.transition=this.options.transition,i.$text.style.transition=this.options.transition,window.setTimeout(function(){i.$bg.setAttribute("stroke",i.state.bg),i.$bg.style.opacity=1,i.$donut.setAttribute("stroke-dashoffset",t),i.$donut.setAttribute("stroke-dasharray",s),i.$donut.setAttribute("stroke",i.state.color),i.$donut.style.opacity=1,i.$text.style.opacity=1},16)},s.prototype.updateText=function(){return"function"==typeof this.options.text&&(this.$text.innerHTML=this.options.text(this.state)),this},s.prototype.set=function(t,s){var i;return n(t)&&n(s)&&(this.state[t]=s,i=this.getDashValues(),this.updateText(),this.animate(i.fill,i.full)),this},s.prototype.setState=function(t){var s;return n(t.value)&&(this.state.value=t.value),n(t.min)&&(this.state.min=t.min),n(t.max)&&(this.state.max=t.max),n(t.bg)&&(this.state.bg=t.bg),n(t.color)&&(this.state.color=t.color),s=this.getDashValues(),this.updateText(),this.animate(s.fill,s.full),this}}(document,window),function(e){var t=document,s=function(){var t=document.querySelectorAll("[data-donutty]");Array.prototype.forEach.call(t,function(t){var s=JSON.parse(JSON.stringify(t.dataset)),i=new e(t,s);t.dataset.donutty=i})};"complete"===t.readyState||"loading"!==t.readyState&&!t.documentElement.doScroll?s():t.addEventListener("DOMContentLoaded",s)}(Donutty);